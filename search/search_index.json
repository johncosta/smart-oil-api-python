{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#smart-oil-gauge-python-client","title":"Smart Oil Gauge Python Client","text":"<p>Smart Oil Gauge is a product used to monitor oil levels in oil tanks.  Data is sent to https://www.dropletfuel.com/ systems. While this site intended for oil distributors and, for a small fee, the data can be retrieved via an API.</p> <p>The purpose of this repository is to document the process of connecting to this API and provide a python based client for convienient access.</p>"},{"location":"#initial-setup","title":"Initial Setup","text":"<p>What worked for me was to email the request for API access to <code>support@smartoilgauge.com</code>. THe support team will provide concise instructions on how to get setup in the https://www.dropletfuel.com/ portal.</p> <p>After setting up a faux \"brand\" in the https://www.dropletfuel.com/ portal and adding credit card on file for the monthly fee, client credentials can then be retrieved.</p> <p>Connecting the Sensors to the \"brand\" requires a final step from support and then the api will be available for use.</p>"},{"location":"#unofficial-api-documentation","title":"Unofficial API Documentation","text":"<p>All api calls should be made to the following base url: https://api.dropletfuel.com</p>"},{"location":"#retrieve-token-via-oauth-20-client-credentials-grant-type","title":"Retrieve token via OAuth 2.0 Client Credentials grant type.","text":""},{"location":"#post-tokenphp-given-appropriate-credentials-a-token-is-returned","title":"POST /token.php (given appropriate credentials, a token is returned)","text":""},{"location":"#request-headers","title":"Request Headers","text":"name type data type description User-Agent required string User-Agent is a characteristic string that lets servers and network peers identify the application, operating system, vendor, and/or version of the requesting user agent. Content-Type required string Content-Type is a representation header is used to indicate the original media type of the resource. <p>NOTE: User-Agent is usually an optional header, but it's been noted that a 406 Not Acceptable response is returned when absent. NOTE: Content-Type should be set to <code>application/x-www-form-urlencoded</code> for the token request.</p>"},{"location":"#request-parameters","title":"Request Parameters","text":"name type data type description grant_type required string Set this to \"client_credentials\". client_id required string Your application's Client ID. grant_type required string Your application's Client Secret."},{"location":"#responses","title":"Responses","text":"http code content-type response <code>200</code> <code>application/json</code> <code>{\"access_token\":\"eyJz93a...k4laUWw\", \"token_type\":\"Bearer\", \"expires_in\":3600, \"scope\": null}</code> <code>400</code> <code>application/json</code> <code>{\"error\":\"invalid_client\",\"error_description\":\"The client credentials are invalid\"}</code> <code>406</code> <code>text/html; charset=iso-8859-1</code> 406 Not Acceptable"},{"location":"#example-curl","title":"Example cURL","text":"<pre><code>curl --request POST \\\n--url 'https://api.dropletfuel.com/token' \\\n--header 'content-type: application/x-www-form-urlencoded' \\\n--header 'User-Agent: ' \\\n--data grant_type=client_credentials \\\n--data client_id=YOUR_CLIENT_ID \\\n--data client_secret=YOUR_CLIENT_SECRET\n</code></pre>"},{"location":"#retrieve-tank-data","title":"Retrieve Tank Data","text":"<p>NOTE: It seems that this endpoint may only return the last data result from the tank.</p>"},{"location":"#get-autoget_tank_dataphp","title":"GET /auto/get_tank_data.php","text":""},{"location":"#request-headers_1","title":"Request Headers","text":"name type data type description User-Agent required string User-Agent is a characteristic string that lets servers and network peers identify the application, operating system, vendor, and/or version of the requesting user agent. Content-Type required string Content-Type is a representation header is used to indicate the original media type of the resource. <p>NOTE: User-Agent is usually an optional header, but it's been noted that a 406 Not Acceptable response is returned when absent.</p> <p>NOTE: Content-Type should be set to <code>application/x-www-form-urlencoded</code> for the token request.</p>"},{"location":"#request-parameters_1","title":"Request Parameters","text":"name type data type description start_index required string Starting index for results returned. max_results required string Maximum number of results returned in the API."},{"location":"#responses_1","title":"Responses","text":"http code content-type response <code>200</code> <code>application/json</code> <code>{\"result\":\"ok\",\"start_index\":\"0\",\"max_results\":\"1000\",\"data\":[{\"acct_num\":\"ABC1234\",\"tank_num\":\"1\",\"gallons\":\"307.74\",\"tank_volume\":\"660\",\"sensor_id\":\"1123456789\",\"last_read\":\"2023-09-07 08:25:17\",\"battery\":\"Good\"},{\"acct_num\":\"ABC1234\",\"tank_num\":\"1\",\"gallons\":\"178.72\",\"tank_volume\":\"660\",\"sensor_id\":\"1123456789\",\"last_read\":\"2023-09-07 08:39:58\",\"battery\":\"Good\"}]}</code> <code>401</code> <code>application/json</code> <code>{\"error\":\"expired_token\",\"error_description\":\"The access token provided is invalid\"}</code> <code>406</code> <code>text/html; charset=iso-8859-1</code> 406 Not Acceptable"},{"location":"#example-curl_1","title":"Example cURL","text":"<pre><code>curl --request GET \\\n--url 'https://api.dropletfuel.com/auto/get_tank_data.php' \\\n--header 'User-Agent: ' \\\n--header 'Content-Type: application/json'\n--header 'Authorization: Bearer &lt;token&gt;'\n</code></pre>"}]}